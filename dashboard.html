<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tableau de bord - LOCAYA</title>
    <meta name="description" content="G√©rez vos favoris, recherches et profil sur votre espace personnel LOCAYA.">
    
    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.js"></script>
    
    <!-- Styles -->
    <link rel="stylesheet" href="css/variables.css">
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <!-- Header -->
    <header class="header scrolled" id="header">
        <div class="container">
            <div class="flex-between">
                <a href="index.html" class="logo">
                    <img src="https://i.ibb.co/4gj4vCgv/5924543068982331982-120.jpg" alt="LOCAYA">
                    LOCAYA
                </a>
                
                <nav class="nav">
                    <ul class="nav-links">
                        <li><a href="index.html">Accueil</a></li>
                        <li><a href="search.html">Rechercher</a></li>
                        <li><a href="index.html#about">√Ä propos</a></li>
                        <li><a href="index.html#contact">Contact</a></li>
                    </ul>
                    
                    <div class="header-actions">
                        <div class="user-profile-header" id="userProfileHeader">
                            <span id="userWelcome">Bonjour !</span>
                            <button onclick="logout()" class="btn btn-outline btn-sm">D√©connexion</button>
                        </div>
                    </div>
                    
                    <button class="mobile-menu-btn" id="mobileMenuBtn">
                        <i data-lucide="menu"></i>
                    </button>
                </nav>
            </div>
        </div>
    </header>

    <!-- Dashboard Container -->
    <div class="dashboard-container">
        <!-- Welcome Banner -->
        <div id="welcomeBanner" class="welcome-banner" style="display: none; background: var(--gradient-primary); color: white; text-align: center; padding: var(--spacing-8); margin-bottom: var(--spacing-6);">
            <div class="container">
                <h1 style="margin-bottom: var(--spacing-4); font-size: var(--font-size-3xl);">
                    <i data-lucide="party-popper"></i> Bienvenue sur LOCAYA !
                </h1>
                <p style="font-size: var(--font-size-lg); opacity: 0.9; margin-bottom: var(--spacing-6);">
                    Votre compte a √©t√© cr√©√© avec succ√®s. D√©couvrez toutes les fonctionnalit√©s de votre espace personnel.
                </p>
                <button onclick="hideWelcomeBanner()" class="btn btn-secondary">
                    Continuer
                </button>
            </div>
        </div>

        <!-- Dashboard Header -->
        <div class="dashboard-header">
            <div class="container">
                <div style="display: flex; justify-content: space-between; align-items: center; flex-wrap: wrap; gap: var(--spacing-4);">
                    <div>
                        <h1 id="dashboardTitle" style="margin-bottom: var(--spacing-2);">Tableau de bord</h1>
                        <p id="dashboardSubtitle" style="color: var(--gray-600);">G√©rez vos favoris et votre profil</p>
                    </div>
                    
                    <div style="display: flex; gap: var(--spacing-3); align-items: center;">
                        <a href="search.html" class="btn btn-primary">
                            <i data-lucide="search"></i> Rechercher un logement
                        </a>
                        <button id="notificationsBtn" class="btn btn-outline" onclick="toggleNotifications()">
                            <i data-lucide="bell"></i> <span id="notificationCount" class="notification-badge" style="display: none;">0</span>
                        </button>
                    </div>
                </div>
                
                <!-- Navigation Tabs -->
                <div class="dashboard-nav">
                    <button class="active" data-tab="overview" onclick="switchTab('overview')">
                        <i data-lucide="bar-chart-3"></i> Vue d'ensemble
                    </button>
                    <button data-tab="favorites" onclick="switchTab('favorites')">
                        <i data-lucide="heart"></i> Favoris
                    </button>
                    <button data-tab="searches" onclick="switchTab('searches')">
                        <i data-lucide="search"></i> Recherches
                    </button>
                    <button data-tab="messages" onclick="switchTab('messages')">
                        <i data-lucide="message-circle"></i> Messages
                    </button>
                    <button data-tab="profile" onclick="switchTab('profile')">
                        <i data-lucide="user"></i> Profil
                    </button>
                    <button data-tab="properties" onclick="switchTab('properties')" id="propertiesTab" style="display: none;">
                        <i data-lucide="building"></i> Mes Biens
                    </button>
                    <button data-tab="analytics" onclick="switchTab('analytics')" id="analyticsTab" style="display: none;">
                        <i data-lucide="bar-chart-3"></i> Statistiques
                    </button>
                </div>
            </div>
        </div>

        <!-- Properties Tab (Owner only) -->
        <div id="properties-tab" class="tab-content">
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: var(--spacing-6); flex-wrap: wrap; gap: var(--spacing-4);">
                <div>
                    <h2>Mes Biens Immobiliers</h2>
                    <p style="color: var(--gray-600); margin-top: var(--spacing-2);">
                        G√©rez vos propri√©t√©s et suivez leurs performances
                    </p>
                </div>
                <button onclick="addNewProperty()" class="btn btn-primary">
                    <i data-lucide="plus"></i> Ajouter un bien
                </button>
            </div>
            
            <div id="ownerPropertiesList" class="grid grid-3">
                <!-- Owner properties will be loaded here -->
            </div>
            
            <div id="noOwnerProperties" style="display: none; text-align: center; padding: var(--spacing-12);">
                <div style="font-size: 4rem; margin-bottom: var(--spacing-4); opacity: 0.5;">üè†</div>
                <h3 style="margin-bottom: var(--spacing-4);">Aucun bien enregistr√©</h3>
                <p style="color: var(--gray-600); margin-bottom: var(--spacing-6);">
                    Commencez par ajouter votre premier bien immobilier
                </p>
                <button onclick="addNewProperty()" class="btn btn-primary">
                    <i data-lucide="plus"></i> Ajouter mon premier bien
                </button>
            </div>
        </div>

        <!-- Analytics Tab (Owner only) -->
        <div id="analytics-tab" class="tab-content">
            <div style="margin-bottom: var(--spacing-8);">
                <h2>Statistiques de Performance</h2>
                <p style="color: var(--gray-600); margin-top: var(--spacing-2);">
                    Analysez les performances de vos biens immobiliers
                </p>
            </div>
            
            <!-- Analytics Stats -->
            <div class="dashboard-stats" style="margin-bottom: var(--spacing-10);">
                <div class="stat-card animate-on-scroll">
                    <div class="stat-number" id="totalViews">0</div>
                    <div class="stat-label">Vues totales</div>
                    <div style="color: var(--primary-violet); margin-top: var(--spacing-2);">
                        <i data-lucide="eye"></i>
                    </div>
                </div>
                
                <div class="stat-card animate-on-scroll" style="animation-delay: 0.1s;">
                    <div class="stat-number" id="totalContacts">0</div>
                    <div class="stat-label">Contacts re√ßus</div>
                    <div style="color: var(--primary-violet); margin-top: var(--spacing-2);">
                        <i data-lucide="phone"></i>
                    </div>
                </div>
                
                <div class="stat-card animate-on-scroll" style="animation-delay: 0.2s;">
                    <div class="stat-number" id="averageRating">0</div>
                    <div class="stat-label">Note moyenne</div>
                    <div style="color: var(--primary-violet); margin-top: var(--spacing-2);">
                        <i data-lucide="star"></i>
                    </div>
                </div>
                
                <div class="stat-card animate-on-scroll" style="animation-delay: 0.3s;">
                    <div class="stat-number" id="monthlyRevenue">0</div>
                    <div class="stat-label">Revenus mensuels</div>
                    <div style="color: var(--primary-violet); margin-top: var(--spacing-2);">
                        <i data-lucide="coins"></i>
                    </div>
                </div>
            </div>
            
            <!-- Performance Charts -->
            <div class="grid-2" style="gap: var(--spacing-8);">
                <div class="card">
                    <h3 style="margin-bottom: var(--spacing-6);">√âvolution des vues</h3>
                    <div style="height: 300px; background: var(--gray-50); border-radius: var(--radius-lg); display: flex; align-items: center; justify-content: center; color: var(--gray-600);">
                        <div style="text-align: center;">
                            <i data-lucide="trending-up" style="width: 48px; height: 48px; margin-bottom: var(--spacing-4);"></i>
                            <p>Graphique des vues (√† venir)</p>
                        </div>
                    </div>
                </div>
                
                <div class="card">
                    <h3 style="margin-bottom: var(--spacing-6);">R√©partition par type</h3>
                    <div style="height: 300px; background: var(--gray-50); border-radius: var(--radius-lg); display: flex; align-items: center; justify-content: center; color: var(--gray-600);">
                        <div style="text-align: center;">
                            <i data-lucide="pie-chart" style="width: 48px; height: 48px; margin-bottom: var(--spacing-4);"></i>
                            <p>Graphique en secteurs (√† venir)</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- Dashboard Content -->
        <div class="dashboard-content">
            <div class="container">
                <!-- Overview Tab -->
                <div id="overview-tab" class="tab-content active">
                    <!-- Stats Cards -->
                    <div class="dashboard-stats">
                        <div class="stat-card animate-on-scroll">
                            <div class="stat-number" id="favoritesCount">0</div>
                            <div class="stat-label">Favoris</div>
                            <div style="color: var(--primary-violet); margin-top: var(--spacing-2);">
                                <i data-lucide="heart"></i>
                            </div>
                        </div>
                        
                        <div class="stat-card animate-on-scroll" style="animation-delay: 0.1s;">
                            <div class="stat-number" id="searchesCount">0</div>
                            <div class="stat-label">Recherches</div>
                            <div style="color: var(--primary-violet); margin-top: var(--spacing-2);">
                                <i data-lucide="search"></i>
                            </div>
                        </div>
                        
                        <div class="stat-card animate-on-scroll" style="animation-delay: 0.2s;">
                            <div class="stat-number" id="messagesCount">0</div>
                            <div class="stat-label">Messages</div>
                            <div style="color: var(--primary-violet); margin-top: var(--spacing-2);">
                                <i data-lucide="message-circle"></i>
                            </div>
                        </div>
                        
                        <div class="stat-card animate-on-scroll" style="animation-delay: 0.3s;">
                            <div class="stat-number" id="daysActive">0</div>
                            <div class="stat-label">Jours d'activit√©</div>
                            <div style="color: var(--primary-violet); margin-top: var(--spacing-2);">
                                <i data-lucide="calendar"></i>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Quick Actions -->
                    <div class="card animate-on-scroll" style="margin: var(--spacing-8) 0;">
                        <h2 style="margin-bottom: var(--spacing-6);">Actions rapides</h2>
                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: var(--spacing-4);">
                            <a href="search.html" class="quick-action-card">
                                <div class="quick-action-icon">
                                    <i data-lucide="search"></i>
                                </div>
                                <h3>Rechercher un logement</h3>
                                <p>Trouvez votre futur chez-vous parmi nos offres</p>
                            </a>
                            
                            <button onclick="switchTab('favorites')" class="quick-action-card">
                                <div class="quick-action-icon">
                                    <i data-lucide="heart"></i>
                                </div>
                                <h3>Mes favoris</h3>
                                <p>Consultez vos logements sauvegard√©s</p>
                            </button>
                            
                            <button onclick="switchTab('messages')" class="quick-action-card">
                                <div class="quick-action-icon">
                                    <i data-lucide="message-circle"></i>
                                </div>
                                <h3>Mes messages</h3>
                                <p>√âchangez avec les propri√©taires</p>
                            </button>
                            
                            <button onclick="switchTab('profile')" class="quick-action-card">
                                <div class="quick-action-icon">
                                    <i data-lucide="settings"></i>
                                </div>
                                <h3>Param√®tres</h3>
                                <p>G√©rez votre profil et pr√©f√©rences</p>
                            </button>
                        </div>
                    </div>
                    
                    <!-- Recent Activity -->
                    <div class="card animate-on-scroll">
                        <h2 style="margin-bottom: var(--spacing-6);">Activit√© r√©cente</h2>
                        <div id="recentActivity">
                            <div style="text-align: center; color: var(--gray-600); padding: var(--spacing-8);">
                                <div style="font-size: 3rem; margin-bottom: var(--spacing-4); opacity: 0.5;">
                                    <i data-lucide="activity"></i>
                                </div>
                                <p>Votre activit√© appara√Ætra ici</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Favorites Tab -->
                <div id="favorites-tab" class="tab-content">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: var(--spacing-6); flex-wrap: wrap; gap: var(--spacing-4);">
                        <div>
                            <h2>Mes favoris</h2>
                            <p style="color: var(--gray-600); margin-top: var(--spacing-2);">
                                Logements que vous avez sauvegard√©s
                            </p>
                        </div>
                        <div style="display: flex; gap: var(--spacing-3); align-items: center;">
                            <select id="favoritesSort" onchange="sortFavorites()" style="padding: var(--spacing-2); border: 1px solid var(--gray-300); border-radius: var(--radius-sm);">
                                <option value="recent">Plus r√©cents</option>
                                <option value="price-asc">Prix croissant</option>
                                <option value="price-desc">Prix d√©croissant</option>
                                <option value="rating">Mieux not√©s</option>
                            </select>
                            <button onclick="clearAllFavorites()" class="btn btn-outline btn-sm">
                                <i data-lucide="trash-2"></i> Tout supprimer
                            </button>
                        </div>
                    </div>
                    
                    <div id="favoritesList" class="grid grid-3">
                        <!-- Favorites will be loaded here -->
                    </div>
                    
                    <div id="noFavorites" style="display: none; text-align: center; padding: var(--spacing-12);">
                        <div style="font-size: 4rem; margin-bottom: var(--spacing-4); opacity: 0.5;">‚ù§Ô∏è</div>
                        <h3 style="margin-bottom: var(--spacing-4);">Aucun favori pour le moment</h3>
                        <p style="color: var(--gray-600); margin-bottom: var(--spacing-6);">
                            Parcourez nos logements et cliquez sur ‚ù§Ô∏è pour les sauvegarder ici
                        </p>
                        <a href="search.html" class="btn btn-primary">
                            D√©couvrir les logements
                        </a>
                    </div>
                </div>

                <!-- Searches Tab -->
                <div id="searches-tab" class="tab-content">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: var(--spacing-6); flex-wrap: wrap; gap: var(--spacing-4);">
                        <div>
                            <h2>Historique des recherches</h2>
                            <p style="color: var(--gray-600); margin-top: var(--spacing-2);">
                                Retrouvez vos recherches pr√©c√©dentes
                            </p>
                        </div>
                        <button onclick="clearSearchHistory()" class="btn btn-outline btn-sm">
                            <i data-lucide="trash-2"></i> Effacer l'historique
                        </button>
                    </div>
                    
                    <div id="searchHistory">
                        <!-- Search history will be loaded here -->
                    </div>
                    
                    <div id="noSearches" style="display: none; text-align: center; padding: var(--spacing-12);">
                        <div style="font-size: 4rem; margin-bottom: var(--spacing-4); opacity: 0.5;">üîç</div>
                        <h3 style="margin-bottom: var(--spacing-4);">Aucune recherche enregistr√©e</h3>
                        <p style="color: var(--gray-600); margin-bottom: var(--spacing-6);">
                            Vos recherches appara√Ætront ici pour un acc√®s rapide
                        </p>
                        <a href="search.html" class="btn btn-primary">
                            Faire une recherche
                        </a>
                    </div>
                </div>

                <!-- Messages Tab -->
                <div id="messages-tab" class="tab-content">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: var(--spacing-6); flex-wrap: wrap; gap: var(--spacing-4);">
                        <div>
                            <h2>Messages</h2>
                            <p style="color: var(--gray-600); margin-top: var(--spacing-2);">
                                Conversations avec les propri√©taires
                            </p>
                        </div>
                        <button onclick="markAllRead()" class="btn btn-outline btn-sm">
                            <i data-lucide="check-check"></i> Tout marquer lu
                        </button>
                    </div>
                    
                    <div id="messagesList">
                        <!-- Messages will be loaded here -->
                    </div>
                    
                    <div id="noMessages" style="display: none; text-align: center; padding: var(--spacing-12);">
                        <div style="font-size: 4rem; margin-bottom: var(--spacing-4); opacity: 0.5;">üí¨</div>
                        <h3 style="margin-bottom: var(--spacing-4);">Aucun message</h3>
                        <p style="color: var(--gray-600); margin-bottom: var(--spacing-6);">
                            Contactez des propri√©taires pour voir vos conversations ici
                        </p>
                        <a href="search.html" class="btn btn-primary">
                            Parcourir les logements
                        </a>
                    </div>
                </div>

                <!-- Profile Tab -->
                <div id="profile-tab" class="tab-content">
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: var(--spacing-8); align-items: start;">
                        <!-- Profile Info -->
                        <div class="card">
                            <h2 style="margin-bottom: var(--spacing-6);">Informations personnelles</h2>
                            
                            <form id="profileForm">
                                <div style="text-align: center; margin-bottom: var(--spacing-6);">
                                    <div id="profileAvatar" class="profile-avatar">
                                        <!-- Avatar will be generated -->
                                    </div>
                                    <button type="button" onclick="changeAvatar()" class="btn btn-outline btn-sm" style="margin-top: var(--spacing-3);">
                                        <i data-lucide="camera"></i> Changer l'avatar
                                    </button>
                                </div>
                                
                                <div class="form-group">
                                    <input type="text" id="profileName" name="name" required placeholder=" ">
                                    <label for="profileName">Nom complet</label>
                                </div>
                                
                                <div class="form-group">
                                    <input type="email" id="profileEmail" name="email" required placeholder=" " readonly>
                                    <label for="profileEmail">Email</label>
                                </div>
                                
                                <div class="form-group">
                                    <input type="tel" id="profilePhone" name="phone" placeholder=" ">
                                    <label for="profilePhone">T√©l√©phone</label>
                                </div>
                                
                                <div class="form-group">
                                    <select id="profileAccountType" name="accountType" disabled>
                                        <option value="user">üè† Je cherche un logement</option>
                                        <option value="owner">üèòÔ∏è Je loue des logements</option>
                                    </select>
                                </div>
                                
                                <button type="submit" class="btn btn-primary" style="width: 100%;">
                                    <i data-lucide="save"></i> Sauvegarder les modifications
                                </button>
                            </form>
                        </div>
                        
                        <!-- Account Settings -->
                        <div class="card">
                            <h2 style="margin-bottom: var(--spacing-6);">Param√®tres du compte</h2>
                            
                            <div style="display: flex; flex-direction: column; gap: var(--spacing-4);">
                                <div style="display: flex; justify-content: space-between; align-items: center; padding: var(--spacing-4); background: var(--gray-50); border-radius: var(--radius-lg);">
                                    <div>
                                        <h4>Notifications par email</h4>
                                        <p style="color: var(--gray-600); font-size: var(--font-size-sm);">Recevoir les actualit√©s LOCAYA</p>
                                    </div>
                                    <label class="switch">
                                        <input type="checkbox" id="emailNotifications" onchange="toggleEmailNotifications()">
                                        <span class="slider"></span>
                                    </label>
                                </div>
                                
                                <div style="display: flex; justify-content: space-between; align-items: center; padding: var(--spacing-4); background: var(--gray-50); border-radius: var(--radius-lg);">
                                    <div>
                                        <h4>Mode sombre</h4>
                                        <p style="color: var(--gray-600); font-size: var(--font-size-sm);">Interface en th√®me sombre</p>
                                    </div>
                                    <label class="switch">
                                        <input type="checkbox" id="darkMode" onchange="toggleDarkMode()">
                                        <span class="slider"></span>
                                    </label>
                                </div>
                                
                                <div style="display: flex; justify-content: space-between; align-items: center; padding: var(--spacing-4); background: var(--gray-50); border-radius: var(--radius-lg);">
                                    <div>
                                        <h4>Recherches sauvegard√©es</h4>
                                        <p style="color: var(--gray-600); font-size: var(--font-size-sm);">Garder l'historique des recherches</p>
                                    </div>
                                    <label class="switch">
                                        <input type="checkbox" id="saveSearches" onchange="toggleSaveSearches()" checked>
                                        <span class="slider"></span>
                                    </label>
                                </div>
                            </div>
                            
                            <hr style="margin: var(--spacing-6) 0;">
                            
                            <div>
                                <h3 style="margin-bottom: var(--spacing-4); color: var(--gray-700);">Zone de danger</h3>
                                
                                <button onclick="changePassword()" class="btn btn-outline" style="width: 100%; margin-bottom: var(--spacing-3);">
                                    <i data-lucide="lock"></i> Changer le mot de passe
                                </button>
                                
                                <button onclick="deleteAccount()" class="btn btn-danger" style="width: 100%;">
                                    <i data-lucide="trash-2"></i> Supprimer le compte
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Notifications Panel -->
    <div id="notificationsPanel" class="notifications-panel">
        <div class="notifications-header">
            <h3>Notifications</h3>
            <button onclick="closeNotifications()" class="btn btn-outline btn-sm">
                <i data-lucide="x"></i>
            </button>
        </div>
        <div id="notificationsList">
            <!-- Notifications will be loaded here -->
        </div>
    </div>

    <!-- Bottom Navigation (Mobile) -->
    <nav class="bottom-nav" id="bottomNav">
        <ul class="bottom-nav-items">
            <li class="bottom-nav-item">
                <a href="index.html">
                    <span class="icon"><i data-lucide="home"></i></span>
                    <span>Accueil</span>
                </a>
            </li>
            <li class="bottom-nav-item">
                <a href="search.html">
                    <span class="icon"><i data-lucide="search"></i></span>
                    <span>Recherche</span>
                </a>
            </li>
            <li class="bottom-nav-item">
                <a href="#" class="active">
                    <span class="icon"><i data-lucide="heart"></i></span>
                    <span>Favoris</span>
                </a>
            </li>
            <li class="bottom-nav-item">
                <a href="#" class="active">
                    <span class="icon"><i data-lucide="user"></i></span>
                    <span>Profil</span>
                </a>
            </li>
        </ul>
    </nav>

    <!-- Toast Container -->
    <div class="toast-container" id="toastContainer"></div>

    <!-- Scripts -->
    <script src="js/app.js"></script>
    <script src="js/dashboard.js"></script>
    <script>
        // Initialize Lucide icons
        document.addEventListener('DOMContentLoaded', function() {
            if (typeof lucide !== 'undefined') {
                lucide.createIcons();
            }
        });
    </script>
</body>
</html>